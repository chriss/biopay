{"total_rows":336,"offset":1,"rows":[
{"id":"_design/admin","key":"_design/admin","value":{"rev":"2-67a4e61a4a89bfa080bd6673777f078f"},"doc":{"_id":"_design/admin","_rev":"2-67a4e61a4a89bfa080bd6673777f078f","language":"javascript","views":{"by_username":{"map":"function(doc) { if (doc.Type == 'user' && doc.roles == 'admin') emit(doc.username, doc) }"}}}},
{"id":"_design/auth","key":"_design/auth","value":{"rev":"12-5fd413fa6b450b90fc730306742ea7ef"},"doc":{"_id":"_design/auth","_rev":"12-5fd413fa6b450b90fc730306742ea7ef","language":"javascript","views":{"by_username":{"map":"function(doc) { if (doc.Type == 'user')  emit(doc.username, doc); if (doc.Type == 'member') emit(doc.member_id, doc) }"}}}},
{"id":"_design/jobs","key":"_design/jobs","value":{"rev":"5-28b8fca51ce81a86ba7bc4d6179f7f07"},"doc":{"_id":"_design/jobs","_rev":"5-28b8fca51ce81a86ba7bc4d6179f7f07","language":"javascript","views":{"all":{"map":"function(doc) { if (doc.Type == 'command')  emit(doc._id, doc) }"},"by_id":{"map":"function(doc) { if (doc.Type == 'command')  emit(doc._id, doc) }"}},"filters":{"by_cardlock":"function(doc, req) { if (doc.Type == 'command' && doc.cardlock == req.query.cardlock) { return true; } else { return false; } }"}}},
{"id":"_design/members","key":"_design/members","value":{"rev":"7-0ee756964367ed2ff4e2ba7c0d34b95a"},"doc":{"_id":"_design/members","_rev":"7-0ee756964367ed2ff4e2ba7c0d34b95a","language":"javascript","views":{"by_id":{"map":"function(doc) { if (doc.Type == 'member')  emit(doc.member_id, doc) }"},"by_email":{"map":"function(doc) { if (doc.Type == 'member')  emit(doc.email, doc) }"},"by_hash":{"map":"function(doc) { if (doc.Type == 'member' && doc.login_hash)  emit(doc.login_hash, doc) }"},"active_count":{"map":"function(doc) { if (doc.Type == 'member') emit(doc.member_id, 1) }","reduce":"function(keys, values, rereduce) { return sum(values) }"}}}},
{"id":"_design/potential_members","key":"_design/potential_members","value":{"rev":"1-c561fe1061b647ec7ffb385facceba1f"},"doc":{"_id":"_design/potential_members","_rev":"1-c561fe1061b647ec7ffb385facceba1f","language":"javascript","views":{"by_email":{"map":"function(doc) { if (doc.Type == 'potential_member')  emit(doc.email, doc) }"},"by_hash":{"map":"function(doc) { if (doc.Type == 'potential_member' && doc.hash)  emit(doc.hash, doc) }"}}}},
{"id":"_design/txns","key":"_design/txns","value":{"rev":"27-dbb674fd16abc0a474722853c5b98988"},"doc":{"_id":"_design/txns","_rev":"27-dbb674fd16abc0a474722853c5b98988","language":"javascript","views":{"by_member":{"map":"function(doc) { if (doc.Type == 'txn')  emit(doc.member_id, doc) }"},"by_id":{"map":"function(doc) { if (doc.Type == 'txn')  emit(doc.txn_id, doc) }"},"unpaid":{"map":"function(doc) { if (doc.Type == 'txn' && !Number(doc.paid))  emit(doc.member_id, doc) }"},"recent":{"map":"function(doc) { if (doc.Type == 'txn' && doc.litres > 0)  emit(doc.epoch_time * -1, doc) }"},"fuel_sales":{"map":"function(doc) { if (doc.Type == 'txn' && doc.litres > 0) emit(doc.member_id, 1) }","reduce":"function(keys, values, rereduce) { return sum(values) }"},"litres_by_date":{"map":"function(doc) { if (doc.Type == 'txn') emit(doc.epoch_time, parseFloat(doc.litres)) }","reduce":"function(keys, values, rereduce) { return sum(values) }"},"litres_by_member":{"map":"function(doc) { if (doc.Type == 'txn') emit(doc.member_id, parseFloat(doc.litres)) }","reduce":"function(keys, values, rereduce) { return sum(values) }"},"litres_count_per_txn":{"map":"function(doc) {\n  if (doc.Type == 'txn') {\n    if (doc.litres >= 0 && doc .litres < 10)\n\t  emit(0, 1);\n    else if (doc.litres >= 10 && doc.litres < 20)\n          emit(10, 1);\n    else if (doc.litres >= 20 && doc.litres < 30)\n\t  emit (20, 1);\n    else if (doc.litres >= 30 && doc.litres < 40)\n\t  emit (30, 1);\n    else if (doc.litres >= 40 && doc.litres < 50)\n\t  emit (40, 1);\n    else if (doc.litres >= 50 && doc.litres < 60)\n\t  emit (50, 1);\n    else if (doc.litres >= 60 && doc.litres < 70)\n\t  emit (60, 1);\n    else if (doc.litres >= 70 && doc.litres < 80)\n\t  emit (70, 1);\n    else if (doc.litres >= 80 && doc.litres < 90)\n\t  emit (80, 1);\t\n  }\n}","reduce":"function (keys, values, rereduce) {\n   return sum(values); \n}"},"litres_per_txn":{"map":"function(doc) {\n  if (doc.Type == 'txn' && doc.litres > 0) {\n    var bucket = Math.floor(doc.litres / 10) * 10;\n    emit([doc.epoch_time, bucket], { bucket: bucket });\n  }\n}    ","reduce":"function (keys, values, rereduce) {\n    var combined_values = {};\n    for (var i in values) {\n      var bucket = values[i].bucket;\n      if (bucket in combined_values) {\n        combined_values[values[i].bucket] += 1;\n      }\n      else {\n        combined_values[values[i].bucket] = 1;\n       }\n    }\n    return combined_values;\n}"}}}}
]}
